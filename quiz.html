<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quiz - Quizzly</title>
  <style>
    .quiz-container {
      max-width: 600px;
      margin: 50px auto;
      background: #f8f9fa;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    .option {
      cursor: pointer;
    }
    .option:hover {
      background-color: #e9ecef;
    }
    .selected {
      background-color: #d1e7dd;
    }
  </style>
</head>
<body>

  <div class="container">
    <div class="quiz-container">
      <h2 id="quiz-category" class="text-center mb-4">General Knowledge Quiz</h2>
      <div id="quiz-question" class="mb-3 fs-5">Loading question...</div>
      <div id="quiz-options" class="list-group mb-3"></div>
      <button id="next-btn" class="btn btn-primary w-100">Next</button>
    </div>
  </div>

  <script>
    // Mock Questions
    const quizData = {
      history: [
        {
          question: "Who was the first President of the United States?",
          options: ["Abraham Lincoln", "George Washington", "Thomas Jefferson", "John Adams"],
          answer: 1
        },
        {
          question: "In which year did World War II end?",
          options: ["1945", "1939", "1918", "1963"],
          answer: 0
        }
      ],
      science: [
        {
          question: "What planet is known as the Red Planet?",
          options: ["Mars", "Venus", "Jupiter", "Saturn"],
          answer: 0
        },
        {
          question: "What gas do plants absorb from the atmosphere?",
          options: ["Oxygen", "Hydrogen", "Carbon Dioxide", "Nitrogen"],
          answer: 2
        }
      ],
      geography: [
        {
          question: "What is the capital of France?",
          options: ["Paris", "Berlin", "Madrid", "Rome"],
          answer: 0
        },
        {
          question: "Which ocean is the largest?",
          options: ["Atlantic", "Pacific", "Indian", "Arctic"],
          answer: 1
        }
      ]
    };

    const params = new URLSearchParams(window.location.search);
    const category = params.get('category') || 'history';
    document.getElementById("quiz-category").innerText = `${category.charAt(0).toUpperCase() + category.slice(1)} Quiz`;

    const questions = quizData[category];
    let currentQuestion = 0;
    let score = 0;

    const questionEl = document.getElementById("quiz-question");
    const optionsEl = document.getElementById("quiz-options");
    const nextBtn = document.getElementById("next-btn");

    function loadQuestion() {
      const q = questions[currentQuestion];
      questionEl.innerText = q.question;
      optionsEl.innerHTML = "";

      q.options.forEach((opt, idx) => {
        const btn = document.createElement("button");
        btn.className = "list-group-item list-group-item-action option";
        btn.innerText = opt;
        btn.dataset.index = idx;
        btn.onclick = () => {
          document.querySelectorAll('.option').forEach(o => o.classList.remove('selected'));
          btn.classList.add('selected');
        };
        optionsEl.appendChild(btn);
      });
    }

    nextBtn.addEventListener("click", () => {
      const selected = document.querySelector(".option.selected");
      if (!selected) {
        alert("Please select an option first!");
        return;
      }

      const selectedIndex = parseInt(selected.dataset.index);
      if (selectedIndex === questions[currentQuestion].answer) {
        score++;
      }

      currentQuestion++;
      if (currentQuestion < questions.length) {
        loadQuestion();
      } else {
        showResult();
      }
    });

    function showResult() {
      questionEl.innerHTML = `<strong>Your score: ${score}/${questions.length}</strong>`;
      optionsEl.innerHTML = "";
      nextBtn.style.display = "none";
    }

    loadQuestion();
  </script>
</body>
</html>
